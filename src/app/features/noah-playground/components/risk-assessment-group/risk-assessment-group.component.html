<div class="flex" *ngIf="raBtnPopu">
  <div class="absolute z-50 md:left-96 -ml-5 -mt-11">
    <a class="fixed max-w-xs items-center">
      <div class="mapboxgl-ctrl-bottom-left">
        <div class="mapboxgl-ctrl">
          <button class="raBtn" (click)="openModalPopu()">
            Risk Assessment
          </button>
          <span role="button" class="x-raBtn" (click)="closeBtnRisk()"></span>
        </div>
      </div>
    </a>
  </div>
</div>
<div class="p-5 w-full bg-sidebar shadow-md hover:shodow-lg rounded-lg mt-6">
  <div class="flex cursor-pointer select-none" (click)="toggleExpanded($event)">
    <label class="inline-flex items-center checkbox">
      <input
        type="checkbox"
        class="checkbox h-5 w-5 text-blue-600"
        [checked]="shown$ | async"
        (click)="toggleShown($event)"
      />
    </label>
    <div class="ml-3 text-xl leading-none font-bold flex items-center">
      Risk Assessment
    </div>
    <div class="ml-auto">
      <button
        class="
          w-6
          h-6
          focus:outline-none
          flex
          items-center
          justify-center
          rounded-full
        "
      >
        <svg
          [ngClass]="(expanded$ | async) ? ' hidden ' : ' '"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 1000 1000"
          width="18"
          height="12"
        >
          <path
            d="M283.7 10l-58.4 58.4L656 500 225.3 931.6l58.4 58.4 491-490-491-490z"
          />
        </svg>
        <svg
          [ngClass]="(expanded$ | async) ? ' ' : ' hidden '"
          xmlns="http://www.w3.org/2000/svg"
          width="12"
          height="12"
          viewBox="0 0 18 12"
          fill="none"
        >
          <path
            d="M9.00002 4.73399L2.40001 11.334L0.514683 9.44865L9.00002 0.963319L17.4854 9.44865L15.6 11.334L9.00002 4.73399Z"
            fill="#4A5568"
          ></path>
        </svg>
      </button>
    </div>
  </div>
  <div [ngClass]="(expanded$ | async) ? ' pt-5 ' : ' hidden '">
    <hr class="pb-4" />
    <div class="pl-2">
      <div class="items-center">
        <noah-risk-assessment-rain
          *ngFor="let riskType of riskAssessmentRainTypeList"
          [rainRiskType]="riskType"
          (click)="toggleRain($event)"
        ></noah-risk-assessment-rain>
        <div class="flex items-center pt-2">
          <div class="flex flex-col pl-8">
            <div class="text-lg f-f-r mb-2">Legend</div>
            <div class="flex items-center mb-1">
              <label class="inline-flex items-center">
                <img src="assets/legends/rainfall-forecast-legend.png" />
              </label>
            </div>
          </div>
        </div>

        <div class="pl-2">
          <p class="text-xl font-semibold mt-4">Exposure</p>
        </div>
        <noah-risk-assessment-exposure
          *ngFor="let riskType of riskAssessmentExposureTypeList"
          [exposureRiskType]="riskType"
          (click)="togglePopu($event)"
        ></noah-risk-assessment-exposure>
      </div>
      <div class="px-6 justify-center items-center">
        <button
          class="
            text-xs
            font-bold
            bg-green-600
            rounded-full
            px-10
            py-2
            my-4
            inline-flex
            items-center
            justify-center
            text-white
            focus:outline-none
            mx-auto
            lg:mx-0
            tracking-widest
            hover:bg-green-700
            focus:ring-opacity-50
            border-2
            disabled:cursor-not-allowed disabled:opacity-30
          "
          (click)="calculateRisk()"
          [disabled]="!isButtonEnabled"
        >
          Calculate Risk
        </button>
      </div>
    </div>
  </div>
</div>
