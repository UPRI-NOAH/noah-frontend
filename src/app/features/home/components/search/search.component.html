<!-- SEARCH CONTAINER -->
<div class="relative">
  <div class="pt-2">
    <div
      class="
        relative
        border-solid border-gray-400 border
        bg-white
        flex
        justify-center
        items-center
        rounded-full
        z-10
      "
    >
      <div class="pl-3">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="text-primary h-5 w-5"
          viewBox="0 0 20 20"
          fill="currentColor"
        >
          <path
            fill-rule="evenodd"
            d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z"
            clip-rule="evenodd"
          />
        </svg>
      </div>
      <input
        type="search"
        [formControl]="searchTermCtrl"
        (keyup)="isDropdownOpen = true"
        (focus)="isDropdownOpen = true"
        placeholder="Where do you live?"
        autocomplete="off"
        class="
          rounded-l-full
          w-full
          py-2
          px-4
          text-gray-700
          leading-tight
          focus:outline-none
        "
      />
      <button
        type="submit"
        class="
          rounded-full
          bg-primary
          text-white
          p-2
          m-1
          w-auto
          h-auto
          hover:bg-blue-400
          focus:outline-none
          flex
          items-center
          justify-center
        "
      >
        <span class="w-auto flex justify-end items-center">
          <svg
            fill="none"
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            viewBox="0 0 24 24"
            class="w-4 h-4"
          >
            <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
          </svg>
        </span>
      </button>
    </div>
  </div>

  <!-- DROPDOWN -->
  <div
    class="z-40 absolute mt-2 py-2 w-full bg-white shadow-xl rounded-md"
    *ngIf="isDropdownOpen && (places$ | async)?.length"
  >
    <button
      [routerLink]="['/know-your-hazards']"
      (click)="pickPlace(fixedForLeyte)"
      class="
        block
        w-full
        px-4
        py-2
        text-left text-gray-800
        hover:bg-primary hover:text-white
        transition
        duration-150
        ease-in-out
        focus:outline-none
        group
      "
    >
      {{ fixedForLeyte.text }}
      <div
        class="
          text-xs text-gray-400
          group-hover:text-gray-100
          overflow-ellipsis
          whitespace-nowrap
          overflow-hidden
        "
      >
        {{ fixedForLeyte.place_name }}
      </div>
    </button>
    <button
      [routerLink]="['/know-your-hazards']"
      (click)="pickPlace(place)"
      *ngFor="let place of places$ | async"
      class="
        block
        w-full
        px-4
        py-2
        text-left text-gray-800
        hover:bg-primary hover:text-white
        transition
        duration-150
        ease-in-out
        focus:outline-none
        group
      "
    >
      {{ place.text }}
      <div
        class="
          text-xs text-gray-400
          group-hover:text-gray-100
          overflow-ellipsis
          whitespace-nowrap
          overflow-hidden
        "
      >
        {{ place.place_name }}
      </div>
    </button>
  </div>

  <!-- BACKDROP -->
  <div
    (click)="isDropdownOpen = false"
    *ngIf="isDropdownOpen"
    class="fixed h-full bg-black opacity-30 top-0 right-0 bottom-0 left-0"
  ></div>
</div>
